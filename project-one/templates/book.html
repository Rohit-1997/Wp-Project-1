{% extends "profile_base.html" %}


{% block content %}
<div class="container-fluid books-wrapper">
  <div class="container bookdetails-section">
    <div class="row">
      <div class="col-md-12">
        <h2 class="text-center">Book Details</h2>
        <ul class="list-group">
          <li class="list-group-item"><strong>Book Title: </strong> {{ book.title }}</li>
          <li class="list-group-item"><strong>Book Author:</strong> {{ book.author }}</li>
          <li class="list-group-item"><strong>Book ISBN:</strong> {{ book.isbn }}</li>
          <li class="list-group-item"><strong>Book year:</strong> {{ book.year }}</li>
        </ul>
      </div>
    </div>
  </div>

  <!-- The review section -->
  {% if reviews %}
      <div class="container review-section">
        <div class="row">
          <div class="col-md-12 p-4">
                <h4 class="pd-2 mb-2 reviews-header">Reviews:</h4>
                {% for review in reviews %}
                    <div class="media pd-2">
                      <img class="mr-3" src="/static/default-profile.png" alt="profile image" height="80" width="80">
                      <div class="media-body pb-2">
                        <h5 class="mt-0">{{ review.user_name }}</h5>
                        <h6 class="mt-0"><strong>Rating: </strong> {{ review.rating }}</h6>
                        {{ review.review }}
                      </div>
                    </div>
                {% endfor %}
          </div>
        </div>
      </div>

  {% else %}
    <div class="container review-section">
      <div class="row">
        <div class="col-md-12 p-4">
          <h4>No reviews to display yet, Please provide a review</h4>
        </div>
      </div>
    </div>
  {% endif %}


  <!-- area for flash messages -->
    {% with flash_messages = get_flashed_messages(with_categories=true) %}
      {% if flash_messages %}
      {% for category, message in flash_messages %}
        <div class="alert alert-{{ category }}">
          {{ message }}
        </div>
      {% endfor %}
      {% endif %}
    {% endwith %}


      <div class="container post-review-section">
        <div class="row">
          <div class="col-md-12">
            <!-- The review post section -->
            <div class="row">
              <div class="col-md-12">
                <div class="post-review-section">
                  <h4 class="pd-2 mb-3 reviews-header">Drop a review:</h4>
                  <form class="" action="{{ url_for('book_details', isbn=book.isbn) }}" method="post">
                    <div class="form-group">
                      <textarea name="post-review-data" rows="8" cols="80"></textarea>
                    </div>
                    <div class="form-group">
                      <select class="mdb-select md-form rating-dropdown" name="rating-value">
                        <option value="" disabled selected>Please choose your rating</option>
                        <option value="1">One</option>
                        <option value="2">Two</option>
                        <option value="3">Three</option>
                        <option value="4">Four</option>
                        <option value="5">Five</option>
                      </select>
                    </div>
                    <div class="form-group">
                      <input type="submit" class="btn postreview-btn btn-lg justify-content-center" value="Post" />
                    </div>
                  </form>
                </div>
              </div>
            </div>

          </div>

        </div>

      </div>
</div>
{% endblock %}
{% block content %}

<div class="container about-BookPage Justify-content-center" style="background-color:#547594; padding-top: 20px;">
    <h1 style="text-align: center; font-weight: bolder; color: black; padding-top: 50px; padding-bottom: 5px; font-size: 45px; background-color:#a4aab0;" >{{title}}</h1>
    <div class="row profile-row" style="padding-top: 50px;">
        <!-- image column-->
        <div class="col-5">
            <div class="max-4">
                <h1 style="font-weight: bold;">Book details :</h1>
                <h3> Title : {{title}}</h3>
                <h3> ISBN : {{isbn}}</h3>
                <h3>Author : {{author}}</h3>
                <h3>Published year : {{year}}</h3>
                <h2 style=" font-weight: bold; margin-left: 0px; margin-top: 30px;">Book Rating :</h2>
                <div class="jumbotron jumbotron-fluid" style=" height: 15px; width: 380px; padding-top: 7px; background-color: rgb(197, 213, 226);">
                    <div class="container">
                        <h4 style="color:black; font-family: 'Times New Roman', Times, serif;">Overall rating : {{ avg_rating }} out of 5</h4>
                    </div>
                </div>
   
            </div>
        </div>

        <!-- text column-->
        <div class="col-7">
            <div class="max-4">
                <div>
                    <h2 style=" font-weight: bold;">Customer Reviews :</h2>
                    {% for each in reviews_list %}
                        <div class="jumbotron jumbotron-fluid" style="height: 100px; padding-top: 1px; background-color: rgb(197, 213, 226);">
                            <div class="container">
                                <h4 style="color: black; font-family: 'Times New Roman', Times, serif;font-weight: 500;">Customer Name : {{ each.user_name }}</h4>
                                <p style="color: black; font-family: 'Times New Roman', Times, serif; padding: 0px; margin: 0px;">Customer Rating : {{ each.rating }} out of 5</p>
                                <p style="color: black; font-family: 'Times New Roman', Times, serif; padding: 0px; margin: 0px;">Review : {{ each.review }}</p>
                            </div>
                        </div>
                        
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>

{% endblock %}
